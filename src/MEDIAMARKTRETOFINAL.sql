CREATE DATABASE MEDIAMARKTRETOFINAL;
USE MEDIAMARKTRETOFINAL;

CREATE TABLE CLIENTS(
    ID_C INT AUTO_INCREMENT PRIMARY KEY,
    NAME_C VARCHAR (100) NOT NULL,
    PASSWORD_C VARCHAR (100) NOT NULL
);

CREATE TABLE WORKERS(
    ID_W VARCHAR (50) PRIMARY KEY,
    NAME_W VARCHAR (50) NOT NULL,
    PASSWORD_W VARCHAR (50) NOT NULL
);
		
CREATE TABLE PRODUCTS(
    ID_P VARCHAR (500) PRIMARY KEY,
    NAME_P  VARCHAR(500) NOT NULL,
    PRIZE DECIMAL(10,2) NOT NULL,
    STOCK INT NOT NULL,
    CATEGORY ENUM ('HOME APPLIANCES','COMPUTING','HOME') NOT NULL
);

CREATE TABLE SHOP(
    LOCATION VARCHAR (30) PRIMARY KEY, 
    HORA_APERTURA VARCHAR (3),
    HORA_CIERRE VARCHAR (3)
);


CREATE TABLE BUYS(
    BUYING_DATE DATE NOT NULL,
    AMOUNT INT NOT NULL,
    ID_P VARCHAR (500),
    ID_C INT,
    FOREIGN KEY (ID_P) REFERENCES PRODUCTS(ID_P) ON DELETE CASCADE,
    FOREIGN KEY (ID_C) REFERENCES CLIENTS(ID_C)
);

CREATE TABLE SELL(
    ID_P VARCHAR (500),
    LOCATION VARCHAR (30),
    FOREIGN KEY (ID_P) REFERENCES PRODUCTS(ID_P) ON DELETE CASCADE,
    FOREIGN KEY (LOCATION) REFERENCES SHOP(LOCATION)  
);

INSERT INTO CLIENTS (ID_C, NAME_C, PASSWORD_C) VALUES 
('001', 'Leire', '1234'),
('002', 'Begoña', '1234'),
('003', 'Jon', '1234'),
('004', 'Aiora', '1234');

INSERT INTO WORKERS (ID_W, NAME_W, PASSWORD_W) VALUES 
('EMP001', 'Hugo ', '123'),
('EMP002', 'Aritz ', '1234'),
('EMP003', 'Galder', '1234');

INSERT INTO PRODUCTS (ID_P, NAME_P, PRIZE, STOCK, CATEGORY) VALUES 
('PROD001', 'Lavadora Samsung', 450.00, 10, 'HOME APPLIANCES'),
('PROD002', 'Portátil HP', 1200.00, 5, 'COMPUTING'),
('PROD003', 'Sofá de cuero', 800.00, 3, 'HOME');

INSERT INTO BUYS (BUYING_DATE, AMOUNT, ID_P, ID_C) VALUES 
('2025-03-18', 1, 'PROD001', 001),  
('2025-03-19', 2, 'PROD002', 002), 
('2025-03-20', 1, 'PROD003', 003),
('2025-03-21', 1, 'PROD001', 004);

INSERT INTO SHOP (LOCATION, HORA_APERTURA, HORA_CIERRE) VALUES 
('Madrid', '9', '21'),
('Barcelona', '8', '20'),
('Valencia', '10', '22');

INSERT INTO SELL (ID_P, LOCATION) VALUES 
('PROD001', 'Madrid'),
('PROD002', 'Barcelona'),
('PROD003', 'Valencia');

